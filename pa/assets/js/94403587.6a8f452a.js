"use strict";(globalThis.webpackChunkrobotics_book=globalThis.webpackChunkrobotics_book||[]).push([[2711],{8354:(n,e,r)=>{r.r(e),r.d(e,{assets:()=>c,contentTitle:()=>t,default:()=>u,frontMatter:()=>o,metadata:()=>a,toc:()=>l});const a=JSON.parse('{"id":"module1-ros2/launch-files","title":"Launch Files and Configuration","description":"Orchestrating complex robot systems with ROS 2 launch files","source":"@site/docs/module1-ros2/launch-files.md","sourceDirName":"module1-ros2","slug":"/module1-ros2/launch-files","permalink":"/docusaurus-robotics-book/pa/module1-ros2/launch-files","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1764862720000,"sidebarPosition":5,"frontMatter":{"sidebar_position":5,"title":"Launch Files and Configuration","description":"Orchestrating complex robot systems with ROS 2 launch files","keywords":["ROS 2","launch files","Python launch","configuration","parameters"]},"sidebar":"tutorialSidebar","previous":{"title":"URDF for Humanoids","permalink":"/docusaurus-robotics-book/pa/module1-ros2/urdf-humanoids"},"next":{"title":"Gazebo Simulation Setup","permalink":"/docusaurus-robotics-book/pa/module2-simulation/gazebo-setup"}}');var i=r(4848),s=r(8453);const o={sidebar_position:5,title:"Launch Files and Configuration",description:"Orchestrating complex robot systems with ROS 2 launch files",keywords:["ROS 2","launch files","Python launch","configuration","parameters"]},t="Launch Files and Configuration",c={},l=[{value:"The Problem: Starting Many Nodes",id:"the-problem-starting-many-nodes",level:2},{value:"ROS 2 Launch System",id:"ros-2-launch-system",level:2},{value:"Launch File Types",id:"launch-file-types",level:3},{value:"Basic Python Launch File",id:"basic-python-launch-file",level:2},{value:"Node Configuration",id:"node-configuration",level:2},{value:"Setting Parameters",id:"setting-parameters",level:3},{value:"Loading from YAML File",id:"loading-from-yaml-file",level:3},{value:"Remapping Topics",id:"remapping-topics",level:2},{value:"Namespaces",id:"namespaces",level:2},{value:"Launch Arguments (Command-Line Parameters)",id:"launch-arguments-command-line-parameters",level:2},{value:"Including Other Launch Files",id:"including-other-launch-files",level:2},{value:"Passing Arguments to Included Launch Files",id:"passing-arguments-to-included-launch-files",level:3},{value:"Conditional Execution",id:"conditional-execution",level:2},{value:"Loading URDF/Robot Description",id:"loading-urdfrobot-description",level:2},{value:"Practical Example: Humanoid Robot Launch",id:"practical-example-humanoid-robot-launch",level:2},{value:"Event Handlers",id:"event-handlers",level:2},{value:"Start Node After Another Node is Ready",id:"start-node-after-another-node-is-ready",level:3},{value:"Restart Node on Exit",id:"restart-node-on-exit",level:3},{value:"Logging Configuration",id:"logging-configuration",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"1. Organize by Function",id:"1-organize-by-function",level:3},{value:"2. Use Parameters Files",id:"2-use-parameters-files",level:3},{value:"3. Provide Defaults, Allow Overrides",id:"3-provide-defaults-allow-overrides",level:3},{value:"4. Document Launch Arguments",id:"4-document-launch-arguments",level:3},{value:"Debugging Launch Files",id:"debugging-launch-files",level:2},{value:"Print Launch Configuration",id:"print-launch-configuration",level:3},{value:"Check What Nodes Will Start",id:"check-what-nodes-will-start",level:3},{value:"Verbose Output",id:"verbose-output",level:3},{value:"Next Steps",id:"next-steps",level:2},{value:"Lab Exercise",id:"lab-exercise",level:2}];function d(n){const e={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.header,{children:(0,i.jsx)(e.h1,{id:"launch-files-and-configuration",children:"Launch Files and Configuration"})}),"\n",(0,i.jsx)(e.h2,{id:"the-problem-starting-many-nodes",children:"The Problem: Starting Many Nodes"}),"\n",(0,i.jsxs)(e.p,{children:["A real robot system has ",(0,i.jsx)(e.strong,{children:"dozens of nodes"})," running simultaneously:"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"# Manual startup (painful!)\nros2 run camera_driver camera_node &\nros2 run object_detector yolo_node &\nros2 run path_planner planner_node &\nros2 run motor_controller controller_node &\nros2 run rviz2 rviz2 -d config.rviz &\n# ... 20 more nodes ...\n"})}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Problems"}),":"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Error-prone (forget a node \u2192 system breaks)"}),"\n",(0,i.jsx)(e.li,{children:"No coordination (which node starts first?)"}),"\n",(0,i.jsx)(e.li,{children:"Hard to configure (parameters scattered across commands)"}),"\n",(0,i.jsx)(e.li,{children:"Can't reproduce (no record of how system was started)"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Solution"}),": ",(0,i.jsx)(e.strong,{children:"Launch files"})," start all nodes with one command, manage dependencies, and centralize configuration."]}),"\n",(0,i.jsx)(e.h2,{id:"ros-2-launch-system",children:"ROS 2 Launch System"}),"\n",(0,i.jsx)(e.h3,{id:"launch-file-types",children:"Launch File Types"}),"\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"Type"}),(0,i.jsx)(e.th,{children:"Extension"}),(0,i.jsx)(e.th,{children:"Use Case"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.strong,{children:"Python"})}),(0,i.jsx)(e.td,{children:(0,i.jsx)(e.code,{children:".launch.py"})}),(0,i.jsxs)(e.td,{children:[(0,i.jsx)(e.strong,{children:"Recommended"}),": Most flexible, programmatic control"]})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.strong,{children:"XML"})}),(0,i.jsx)(e.td,{children:(0,i.jsx)(e.code,{children:".launch.xml"})}),(0,i.jsx)(e.td,{children:"Simpler syntax, less flexibility"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.strong,{children:"YAML"})}),(0,i.jsx)(e.td,{children:(0,i.jsx)(e.code,{children:".launch.yaml"})}),(0,i.jsx)(e.td,{children:"Declarative, limited capabilities"})]})]})]}),"\n",(0,i.jsxs)(e.p,{children:["This course focuses on ",(0,i.jsx)(e.strong,{children:"Python launch files"})," for maximum power."]}),"\n",(0,i.jsx)(e.h2,{id:"basic-python-launch-file",children:"Basic Python Launch File"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:"from launch import LaunchDescription\nfrom launch_ros.actions import Node\n\ndef generate_launch_description():\n    return LaunchDescription([\n        Node(\n            package='camera_driver',\n            executable='camera_node',\n            name='camera',\n            output='screen',\n        ),\n\n        Node(\n            package='object_detector',\n            executable='yolo_node',\n            name='detector',\n            output='screen',\n        ),\n\n        Node(\n            package='path_planner',\n            executable='planner_node',\n            name='planner',\n            output='screen',\n        ),\n    ])\n"})}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Run"}),":"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"ros2 launch my_package robot.launch.py\n"})}),"\n",(0,i.jsx)(e.p,{children:"All three nodes start simultaneously with one command!"}),"\n",(0,i.jsx)(e.h2,{id:"node-configuration",children:"Node Configuration"}),"\n",(0,i.jsx)(e.h3,{id:"setting-parameters",children:"Setting Parameters"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:"from launch import LaunchDescription\nfrom launch_ros.actions import Node\n\ndef generate_launch_description():\n    return LaunchDescription([\n        Node(\n            package='camera_driver',\n            executable='camera_node',\n            name='camera',\n            parameters=[{\n                'frame_rate': 30,\n                'resolution': [1920, 1080],\n                'auto_exposure': True,\n            }],\n            output='screen',\n        ),\n    ])\n"})}),"\n",(0,i.jsx)(e.h3,{id:"loading-from-yaml-file",children:"Loading from YAML File"}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"config/camera_params.yaml"}),":"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",children:"camera:\n  ros__parameters:\n    frame_rate: 30\n    resolution: [1920, 1080]\n    auto_exposure: true\n    exposure_time: 10.0\n"})}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Launch file"}),":"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:"import os\nfrom ament_index_python.packages import get_package_share_directory\nfrom launch import LaunchDescription\nfrom launch_ros.actions import Node\n\ndef generate_launch_description():\n    # Get package path\n    pkg_path = get_package_share_directory('my_package')\n\n    # Load parameters from YAML\n    params_file = os.path.join(pkg_path, 'config', 'camera_params.yaml')\n\n    return LaunchDescription([\n        Node(\n            package='camera_driver',\n            executable='camera_node',\n            name='camera',\n            parameters=[params_file],\n            output='screen',\n        ),\n    ])\n"})}),"\n",(0,i.jsx)(e.h2,{id:"remapping-topics",children:"Remapping Topics"}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Scenario"}),": ",(0,i.jsx)(e.code,{children:"camera_node"})," publishes to ",(0,i.jsx)(e.code,{children:"/image"}),", but ",(0,i.jsx)(e.code,{children:"detector_node"})," expects ",(0,i.jsx)(e.code,{children:"/camera/image"}),"."]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Solution"}),": Remap topics in launch file:"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:"Node(\n    package='camera_driver',\n    executable='camera_node',\n    name='camera',\n    remappings=[\n        ('/image', '/camera/image'),\n    ],\n    output='screen',\n),\n"})}),"\n",(0,i.jsx)(e.h2,{id:"namespaces",children:"Namespaces"}),"\n",(0,i.jsx)(e.p,{children:"Run multiple instances of same node (e.g., two cameras):"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:"Node(\n    package='camera_driver',\n    executable='camera_node',\n    name='left_camera',\n    namespace='left',\n    parameters=[{'device_id': 0}],\n),\n\nNode(\n    package='camera_driver',\n    executable='camera_node',\n    name='right_camera',\n    namespace='right',\n    parameters=[{'device_id': 1}],\n),\n"})}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Result"}),":"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["Left camera publishes to: ",(0,i.jsx)(e.code,{children:"/left/image"})]}),"\n",(0,i.jsxs)(e.li,{children:["Right camera publishes to: ",(0,i.jsx)(e.code,{children:"/right/image"})]}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"launch-arguments-command-line-parameters",children:"Launch Arguments (Command-Line Parameters)"}),"\n",(0,i.jsx)(e.p,{children:"Make launch files configurable:"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:"from launch import LaunchDescription\nfrom launch.actions import DeclareLaunchArgument\nfrom launch.substitutions import LaunchConfiguration\nfrom launch_ros.actions import Node\n\ndef generate_launch_description():\n    # Declare arguments\n    use_sim_time_arg = DeclareLaunchArgument(\n        'use_sim_time',\n        default_value='false',\n        description='Use simulation time if true'\n    )\n\n    camera_device_arg = DeclareLaunchArgument(\n        'camera_device',\n        default_value='0',\n        description='Camera device ID'\n    )\n\n    # Get argument values\n    use_sim_time = LaunchConfiguration('use_sim_time')\n    camera_device = LaunchConfiguration('camera_device')\n\n    return LaunchDescription([\n        use_sim_time_arg,\n        camera_device_arg,\n\n        Node(\n            package='camera_driver',\n            executable='camera_node',\n            name='camera',\n            parameters=[{\n                'use_sim_time': use_sim_time,\n                'device_id': camera_device,\n            }],\n            output='screen',\n        ),\n    ])\n"})}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Usage"}),":"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"# Default values\nros2 launch my_package robot.launch.py\n\n# Override arguments\nros2 launch my_package robot.launch.py use_sim_time:=true camera_device:=1\n"})}),"\n",(0,i.jsx)(e.h2,{id:"including-other-launch-files",children:"Including Other Launch Files"}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Modular approach"}),": Break complex system into multiple launch files."]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"robot_bringup.launch.py"}),":"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:"from launch import LaunchDescription\nfrom launch.actions import IncludeLaunchDescription\nfrom launch.launch_description_sources import PythonLaunchDescriptionSource\nfrom ament_index_python.packages import get_package_share_directory\nimport os\n\ndef generate_launch_description():\n    sensors_pkg = get_package_share_directory('sensors_package')\n    perception_pkg = get_package_share_directory('perception_package')\n    navigation_pkg = get_package_share_directory('navigation_package')\n\n    return LaunchDescription([\n        # Include sensors launch file\n        IncludeLaunchDescription(\n            PythonLaunchDescriptionSource(\n                os.path.join(sensors_pkg, 'launch', 'sensors.launch.py')\n            ),\n        ),\n\n        # Include perception launch file\n        IncludeLaunchDescription(\n            PythonLaunchDescriptionSource(\n                os.path.join(perception_pkg, 'launch', 'perception.launch.py')\n            ),\n        ),\n\n        # Include navigation launch file\n        IncludeLaunchDescription(\n            PythonLaunchDescriptionSource(\n                os.path.join(navigation_pkg, 'launch', 'navigation.launch.py')\n            ),\n        ),\n    ])\n"})}),"\n",(0,i.jsx)(e.h3,{id:"passing-arguments-to-included-launch-files",children:"Passing Arguments to Included Launch Files"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:"IncludeLaunchDescription(\n    PythonLaunchDescriptionSource(\n        os.path.join(sensors_pkg, 'launch', 'sensors.launch.py')\n    ),\n    launch_arguments={\n        'use_sim_time': 'true',\n        'camera_device': '0',\n    }.items(),\n),\n"})}),"\n",(0,i.jsx)(e.h2,{id:"conditional-execution",children:"Conditional Execution"}),"\n",(0,i.jsx)(e.p,{children:"Start nodes based on conditions:"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:"from launch import LaunchDescription\nfrom launch.actions import DeclareLaunchArgument\nfrom launch.conditions import IfCondition\nfrom launch.substitutions import LaunchConfiguration\nfrom launch_ros.actions import Node\n\ndef generate_launch_description():\n    use_rviz_arg = DeclareLaunchArgument(\n        'use_rviz',\n        default_value='true',\n        description='Start RViz if true'\n    )\n\n    use_rviz = LaunchConfiguration('use_rviz')\n\n    return LaunchDescription([\n        use_rviz_arg,\n\n        # Always start these nodes\n        Node(\n            package='camera_driver',\n            executable='camera_node',\n            name='camera',\n        ),\n\n        # Conditionally start RViz\n        Node(\n            package='rviz2',\n            executable='rviz2',\n            name='rviz',\n            condition=IfCondition(use_rviz),\n            arguments=['-d', '/path/to/config.rviz'],\n        ),\n    ])\n"})}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Usage"}),":"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"# Start with RViz (default)\nros2 launch my_package robot.launch.py\n\n# Start without RViz\nros2 launch my_package robot.launch.py use_rviz:=false\n"})}),"\n",(0,i.jsx)(e.h2,{id:"loading-urdfrobot-description",children:"Loading URDF/Robot Description"}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Common pattern"}),": Load robot URDF and publish to ",(0,i.jsx)(e.code,{children:"/robot_description"})," topic."]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:"from launch import LaunchDescription\nfrom launch_ros.actions import Node\nfrom launch.substitutions import Command\nfrom ament_index_python.packages import get_package_share_directory\nimport os\n\ndef generate_launch_description():\n    pkg_path = get_package_share_directory('my_robot_description')\n    xacro_file = os.path.join(pkg_path, 'urdf', 'robot.urdf.xacro')\n\n    # Process xacro file to URDF\n    robot_description = Command(['xacro ', xacro_file])\n\n    return LaunchDescription([\n        # Robot state publisher (publishes transforms and robot description)\n        Node(\n            package='robot_state_publisher',\n            executable='robot_state_publisher',\n            name='robot_state_publisher',\n            output='screen',\n            parameters=[{\n                'robot_description': robot_description,\n                'use_sim_time': True,\n            }],\n        ),\n\n        # Joint state publisher (publishes joint states)\n        Node(\n            package='joint_state_publisher',\n            executable='joint_state_publisher',\n            name='joint_state_publisher',\n            output='screen',\n        ),\n\n        # RViz for visualization\n        Node(\n            package='rviz2',\n            executable='rviz2',\n            name='rviz',\n            arguments=['-d', os.path.join(pkg_path, 'rviz', 'robot.rviz')],\n        ),\n    ])\n"})}),"\n",(0,i.jsx)(e.h2,{id:"practical-example-humanoid-robot-launch",children:"Practical Example: Humanoid Robot Launch"}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"humanoid_bringup.launch.py"})," (complete system startup):"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:"import os\nfrom ament_index_python.packages import get_package_share_directory\nfrom launch import LaunchDescription\nfrom launch.actions import DeclareLaunchArgument, IncludeLaunchDescription\nfrom launch.launch_description_sources import PythonLaunchDescriptionSource\nfrom launch.substitutions import LaunchConfiguration, Command\nfrom launch.conditions import IfCondition\nfrom launch_ros.actions import Node\n\ndef generate_launch_description():\n    # Package paths\n    robot_desc_pkg = get_package_share_directory('humanoid_description')\n    sensors_pkg = get_package_share_directory('humanoid_sensors')\n    control_pkg = get_package_share_directory('humanoid_control')\n\n    # Launch arguments\n    use_sim_time_arg = DeclareLaunchArgument(\n        'use_sim_time',\n        default_value='false',\n        description='Use simulation time'\n    )\n\n    use_rviz_arg = DeclareLaunchArgument(\n        'use_rviz',\n        default_value='true',\n        description='Start RViz'\n    )\n\n    # Configuration\n    use_sim_time = LaunchConfiguration('use_sim_time')\n    use_rviz = LaunchConfiguration('use_rviz')\n\n    # Robot description (URDF)\n    xacro_file = os.path.join(robot_desc_pkg, 'urdf', 'humanoid.urdf.xacro')\n    robot_description = Command(['xacro ', xacro_file])\n\n    # Parameter files\n    controller_params = os.path.join(control_pkg, 'config', 'controllers.yaml')\n    sensor_params = os.path.join(sensors_pkg, 'config', 'sensors.yaml')\n\n    return LaunchDescription([\n        # Arguments\n        use_sim_time_arg,\n        use_rviz_arg,\n\n        # Robot state publisher\n        Node(\n            package='robot_state_publisher',\n            executable='robot_state_publisher',\n            name='robot_state_publisher',\n            output='screen',\n            parameters=[{\n                'robot_description': robot_description,\n                'use_sim_time': use_sim_time,\n            }],\n        ),\n\n        # Sensor drivers\n        IncludeLaunchDescription(\n            PythonLaunchDescriptionSource(\n                os.path.join(sensors_pkg, 'launch', 'sensors.launch.py')\n            ),\n            launch_arguments={\n                'use_sim_time': use_sim_time,\n                'params_file': sensor_params,\n            }.items(),\n        ),\n\n        # Controllers (balance, locomotion)\n        Node(\n            package='humanoid_control',\n            executable='balance_controller',\n            name='balance_controller',\n            parameters=[controller_params, {'use_sim_time': use_sim_time}],\n            output='screen',\n        ),\n\n        Node(\n            package='humanoid_control',\n            executable='locomotion_controller',\n            name='locomotion_controller',\n            parameters=[controller_params, {'use_sim_time': use_sim_time}],\n            output='screen',\n        ),\n\n        # VLA cognitive layer (AI planning)\n        Node(\n            package='humanoid_ai',\n            executable='vla_planner',\n            name='vla_planner',\n            parameters=[{'use_sim_time': use_sim_time}],\n            output='screen',\n        ),\n\n        # RViz (conditional)\n        Node(\n            package='rviz2',\n            executable='rviz2',\n            name='rviz',\n            condition=IfCondition(use_rviz),\n            arguments=['-d', os.path.join(robot_desc_pkg, 'rviz', 'humanoid.rviz')],\n        ),\n    ])\n"})}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Usage"}),":"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"# Real robot\nros2 launch humanoid_bringup humanoid_bringup.launch.py\n\n# Simulation (with RViz)\nros2 launch humanoid_bringup humanoid_bringup.launch.py use_sim_time:=true\n\n# Simulation (headless, no RViz)\nros2 launch humanoid_bringup humanoid_bringup.launch.py \\\n  use_sim_time:=true use_rviz:=false\n"})}),"\n",(0,i.jsx)(e.h2,{id:"event-handlers",children:"Event Handlers"}),"\n",(0,i.jsx)(e.p,{children:"Execute actions based on events:"}),"\n",(0,i.jsx)(e.h3,{id:"start-node-after-another-node-is-ready",children:"Start Node After Another Node is Ready"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:"from launch import LaunchDescription\nfrom launch.actions import RegisterEventHandler\nfrom launch.event_handlers import OnProcessStart\nfrom launch_ros.actions import Node\n\ndef generate_launch_description():\n    camera_node = Node(\n        package='camera_driver',\n        executable='camera_node',\n        name='camera',\n    )\n\n    # Start detector only after camera is started\n    detector_node = Node(\n        package='object_detector',\n        executable='yolo_node',\n        name='detector',\n    )\n\n    return LaunchDescription([\n        camera_node,\n\n        RegisterEventHandler(\n            OnProcessStart(\n                target_action=camera_node,\n                on_start=[detector_node],\n            )\n        ),\n    ])\n"})}),"\n",(0,i.jsx)(e.h3,{id:"restart-node-on-exit",children:"Restart Node on Exit"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:"from launch.event_handlers import OnProcessExit\nfrom launch.actions import EmitEvent\nfrom launch.events import Shutdown\n\n# Shutdown entire system if critical node exits\nRegisterEventHandler(\n    OnProcessExit(\n        target_action=balance_controller,\n        on_exit=[EmitEvent(event=Shutdown(reason='Balance controller died'))],\n    )\n),\n"})}),"\n",(0,i.jsx)(e.h2,{id:"logging-configuration",children:"Logging Configuration"}),"\n",(0,i.jsx)(e.p,{children:"Control log output levels:"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:"Node(\n    package='my_package',\n    executable='my_node',\n    name='my_node',\n    output='screen',\n    arguments=['--ros-args', '--log-level', 'debug'],\n),\n"})}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Log levels"}),": ",(0,i.jsx)(e.code,{children:"debug"}),", ",(0,i.jsx)(e.code,{children:"info"}),", ",(0,i.jsx)(e.code,{children:"warn"}),", ",(0,i.jsx)(e.code,{children:"error"}),", ",(0,i.jsx)(e.code,{children:"fatal"})]}),"\n",(0,i.jsx)(e.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,i.jsx)(e.h3,{id:"1-organize-by-function",children:"1. Organize by Function"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"launch/\n  \u251c\u2500\u2500 sensors.launch.py          # All sensor drivers\n  \u251c\u2500\u2500 perception.launch.py       # Object detection, SLAM\n  \u251c\u2500\u2500 navigation.launch.py       # Path planning, Nav2\n  \u251c\u2500\u2500 control.launch.py          # Motor controllers\n  \u2514\u2500\u2500 full_system.launch.py      # Includes all of the above\n"})}),"\n",(0,i.jsx)(e.h3,{id:"2-use-parameters-files",children:"2. Use Parameters Files"}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Don't"}),":"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:"Node(\n    parameters=[{\n        'param1': 10,\n        'param2': 20,\n        'param3': 'value',\n        # 50 more parameters...\n    }]\n)\n"})}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Do"}),":"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:"params_file = os.path.join(pkg_path, 'config', 'node_params.yaml')\nNode(parameters=[params_file])\n"})}),"\n",(0,i.jsx)(e.h3,{id:"3-provide-defaults-allow-overrides",children:"3. Provide Defaults, Allow Overrides"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:"DeclareLaunchArgument(\n    'camera_device',\n    default_value='0',  # Good default\n    description='Camera device ID'\n)\n"})}),"\n",(0,i.jsx)(e.h3,{id:"4-document-launch-arguments",children:"4. Document Launch Arguments"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:"DeclareLaunchArgument(\n    'use_sim_time',\n    default_value='false',\n    description='Use simulation (Gazebo) time instead of system time. '\n                'Set to true when running in simulation.'\n)\n"})}),"\n",(0,i.jsx)(e.h2,{id:"debugging-launch-files",children:"Debugging Launch Files"}),"\n",(0,i.jsx)(e.h3,{id:"print-launch-configuration",children:"Print Launch Configuration"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"ros2 launch my_package robot.launch.py --show-args\n# Shows all available arguments and defaults\n"})}),"\n",(0,i.jsx)(e.h3,{id:"check-what-nodes-will-start",children:"Check What Nodes Will Start"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"ros2 launch my_package robot.launch.py --print-description\n# Shows nodes that will be launched\n"})}),"\n",(0,i.jsx)(e.h3,{id:"verbose-output",children:"Verbose Output"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"ros2 launch -v my_package robot.launch.py\n# Shows detailed launch process\n"})}),"\n",(0,i.jsx)(e.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,i.jsx)(e.p,{children:"Congratulations! You've completed Module 1: The Robotic Nervous System (ROS 2). You can now:"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Create ROS 2 nodes in Python"}),"\n",(0,i.jsx)(e.li,{children:"Communicate via topics, services, and actions"}),"\n",(0,i.jsx)(e.li,{children:"Define robot morphology with URDF"}),"\n",(0,i.jsx)(e.li,{children:"Orchestrate complex systems with launch files"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"Next, dive into Module 2 to learn physics simulation with Gazebo and Unity."}),"\n",(0,i.jsxs)(e.p,{children:["\ud83d\udc49 ",(0,i.jsx)(e.strong,{children:(0,i.jsx)(e.a,{href:"../module2-simulation/gazebo-setup",children:"Next: Module 2 - The Digital Twin \u2192"})})]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.admonition,{title:"Launch File Tips",type:"tip",children:(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Start small"}),": Build launch files incrementally, test each addition"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Use IncludeLaunchDescription"}),": Modularize for reusability"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Parameterize everything"}),": Avoid hardcoded values"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Provide good defaults"}),": Users shouldn't need to specify arguments"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Document"}),": Clear descriptions for all launch arguments"]}),"\n"]})}),"\n",(0,i.jsx)(e.h2,{id:"lab-exercise",children:"Lab Exercise"}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Create a humanoid sensor launch system"}),":"]}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"sensors.launch.py"}),":"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"RealSense camera driver"}),"\n",(0,i.jsx)(e.li,{children:"LIDAR driver"}),"\n",(0,i.jsx)(e.li,{children:"IMU driver"}),"\n",(0,i.jsxs)(e.li,{children:["Load parameters from ",(0,i.jsx)(e.code,{children:"config/sensors.yaml"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"perception.launch.py"}),":"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"YOLO object detector (subscribes to camera)"}),"\n",(0,i.jsx)(e.li,{children:"VSLAM node (subscribes to camera + IMU)"}),"\n",(0,i.jsxs)(e.li,{children:["Publishes to ",(0,i.jsx)(e.code,{children:"/detections"})," and ",(0,i.jsx)(e.code,{children:"/odometry"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"robot.launch.py"})," (full system):"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Include sensors.launch.py"}),"\n",(0,i.jsx)(e.li,{children:"Include perception.launch.py"}),"\n",(0,i.jsx)(e.li,{children:"Start robot_state_publisher with URDF"}),"\n",(0,i.jsx)(e.li,{children:"Conditionally start RViz"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Test"}),":"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["Launch with: ",(0,i.jsx)(e.code,{children:"ros2 launch my_package robot.launch.py"})]}),"\n",(0,i.jsxs)(e.li,{children:["Verify all nodes running: ",(0,i.jsx)(e.code,{children:"ros2 node list"})]}),"\n",(0,i.jsxs)(e.li,{children:["Check topics: ",(0,i.jsx)(e.code,{children:"ros2 topic list"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Bonus"}),": Add launch arguments for camera resolution and YOLO model selection."]})]})}function u(n={}){const{wrapper:e}={...(0,s.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(d,{...n})}):d(n)}},8453:(n,e,r)=>{r.d(e,{R:()=>o,x:()=>t});var a=r(6540);const i={},s=a.createContext(i);function o(n){const e=a.useContext(s);return a.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function t(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:o(n.components),a.createElement(s.Provider,{value:e},n.children)}}}]);